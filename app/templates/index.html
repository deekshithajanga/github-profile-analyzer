<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Profile Analyzer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #0d1117 0%, #161b22 50%, #0d1117 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', sans-serif;
            color: #e6edf3;
        }
        .hero {
            padding: 80px 0 40px;
            text-align: center;
        }
        .hero h1 {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(90deg, #58a6ff, #bc8cff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .hero p {
            color: #8b949e;
            font-size: 1.1rem;
            margin-top: 10px;
        }
        .search-card {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 16px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
        }
        .form-control {
            background: #0d1117;
            border: 1px solid #30363d;
            color: #e6edf3;
            border-radius: 10px;
            padding: 14px 18px;
            font-size: 1rem;
        }
        .form-control:focus {
            background: #0d1117;
            border-color: #58a6ff;
            color: #e6edf3;
            box-shadow: 0 0 0 3px rgba(88,166,255,0.15);
        }
        .form-control::placeholder { color: #484f58; }
        .btn-analyze {
            background: linear-gradient(90deg, #238636, #2ea043);
            border: none;
            border-radius: 10px;
            padding: 14px;
            font-size: 1rem;
            font-weight: 600;
            color: white;
            width: 100%;
            margin-top: 16px;
            transition: all 0.3s;
        }
        .btn-analyze:hover {
            background: linear-gradient(90deg, #2ea043, #3fb950);
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(46,160,67,0.4);
        }
        .alert-danger {
            background: #2d1b20;
            border: 1px solid #f85149;
            color: #f85149;
            border-radius: 10px;
        }
        .recent-card {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 12px;
            padding: 24px;
            max-width: 600px;
            margin: 24px auto 0;
        }
        .recent-card h6 {
            color: #8b949e;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 16px;
        }
        .recent-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #21262d;
            cursor: pointer;
        }
        .recent-item:last-child { border-bottom: none; }
        .recent-item:hover .username { color: #58a6ff; }
        .username { color: #e6edf3; font-weight: 500; }
        .timestamp { color: #484f58; font-size: 0.8rem; }
        .features {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        .feature-chip {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 0.85rem;
            color: #8b949e;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .feature-chip i { color: #58a6ff; }
        .loading { display: none; }
    </style>
</head>
<body>
<div class="container">
    <div class="hero">
        <h1><i class="fab fa-github"></i> GitHub Analyzer</h1>
        <p>Analyze any GitHub profile â€” languages, repos, stars, and a developer score</p>
    </div>

    <div class="search-card">
        {% if error %}
        <div class="alert alert-danger mb-3">
            <i class="fas fa-exclamation-circle me-2"></i>{{ error }}
        </div>
        {% endif %}

        <form method="post" action="/analyze" onsubmit="showLoading()">
            <label class="form-label text-secondary mb-2">GitHub Username</label>
            <input type="text" name="username" class="form-control"
                   placeholder="e.g. torvalds, deekshithajanga" required autofocus>
            <button type="submit" class="btn btn-analyze">
                <span class="normal-text"><i class="fas fa-search me-2"></i>Analyze Profile</span>
                <span class="loading"><i class="fas fa-spinner fa-spin me-2"></i>Analyzing...</span>
            </button>
        </form>
    </div>

    <div class="features">
        <div class="feature-chip"><i class="fas fa-code"></i> Language Breakdown</div>
        <div class="feature-chip"><i class="fas fa-star"></i> Top Repositories</div>
        <div class="feature-chip"><i class="fas fa-trophy"></i> Developer Score</div>
        <div class="feature-chip"><i class="fas fa-history"></i> Search History</div>
    </div>

    {% if recent %}
    <div class="recent-card">
        <h6><i class="fas fa-clock me-2"></i>Recent Searches</h6>
        {% for username, searched_at in recent %}
        <div class="recent-item" onclick="document.querySelector('input[name=username]').value='{{ username }}'">
            <span class="username"><i class="fab fa-github me-2"></i>{{ username }}</span>
            <span class="timestamp">{{ searched_at }}</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>

<script>
function showLoading() {
    document.querySelector('.normal-text').style.display = 'none';
    document.querySelector('.loading').style.display = 'inline';
}
</script>
</body>
</html>